(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{100:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createStoryEndAction}));var _ActionTypes__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45);const createStoryEndAction=()=>({type:_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.a.StoryEnd,value:null})},109:function(module,exports,__webpack_require__){module.exports={"url-link":"_2AJF-jqpi6kNquHxHA_xH"}},116:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ActionCreators=exports.ActionTypes=void 0;var ActionTypes={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"};exports.ActionTypes=ActionTypes;var ActionCreators={undo:function(){return{type:ActionTypes.UNDO}},redo:function(){return{type:ActionTypes.REDO}},jumpToFuture:function(index){return{type:ActionTypes.JUMP_TO_FUTURE,index:index}},jumpToPast:function(index){return{type:ActionTypes.JUMP_TO_PAST,index:index}},jump:function(index){return{type:ActionTypes.JUMP,index:index}},clearHistory:function(){return{type:ActionTypes.CLEAR_HISTORY}}};exports.ActionCreators=ActionCreators},117:function(module,exports,__webpack_require__){"use strict";function parseActions(rawActions){var defaultValue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(rawActions)?rawActions:"string"==typeof rawActions?[rawActions]:defaultValue}Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseActions=parseActions,exports.isHistory=function(history){return void 0!==history.present&&void 0!==history.future&&void 0!==history.past&&Array.isArray(history.future)&&Array.isArray(history.past)},exports.includeAction=function(rawActions){var actions=parseActions(rawActions);return function(action){return actions.indexOf(action.type)>=0}},exports.excludeAction=function(rawActions){var actions=parseActions(rawActions);return function(action){return actions.indexOf(action.type)<0}},exports.combineFilters=function(){for(var _len=arguments.length,filters=new Array(_len),_key=0;_key<_len;_key++)filters[_key]=arguments[_key];return filters.reduce((function(prev,curr){return function(action,currentState,previousHistory){return prev(action,currentState,previousHistory)&&curr(action,currentState,previousHistory)}}),(function(){return!0}))},exports.groupByActionTypes=function(rawActions){var actions=parseActions(rawActions);return function(action){return actions.indexOf(action.type)>=0?action.type:null}},exports.newHistory=function(past,present,future){var group=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{past:past,present:present,future:future,group:group,_latestUnfiltered:present,index:past.length,limit:past.length+future.length+1}}},136:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return reset_reset}));var ActionTypes=__webpack_require__(45);var getNormalizedAcceleratorConfig=__webpack_require__(35),lib=__webpack_require__(81),stopAllSoundsAutomatically=__webpack_require__(70);const reset_reset=args=>{const dispatch=args.dispatch,lastLinkTags=args.lastLinkTags,passageObject=args.passageObject,plugins=args.plugins,soundManager=args.soundManager,storyState=args.storyState,config=Object(getNormalizedAcceleratorConfig.a)();return plugins.forEach(({beforeRestart:beforeRestart})=>{"function"==typeof beforeRestart&&beforeRestart({config:config,lastLinkTags:lastLinkTags,passageObject:passageObject,soundManager:soundManager,storyState:storyState})}),soundManager&&Object(stopAllSoundsAutomatically.a)(Object.assign({},soundManager.collection.groups),config.soundManager.excludeFromAutomaticStop),dispatch(lib.ActionCreators.clearHistory()),dispatch(Object.freeze({type:ActionTypes.a.StoryReset}))}},137:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return rewind}));var lib=__webpack_require__(81);var getNormalizedAcceleratorConfig=__webpack_require__(35),stopAllSoundsAutomatically=__webpack_require__(70),dist=__webpack_require__(42);const rewind=(dispatch,soundManager)=>{Object(dist.assert)("function"==typeof dispatch);const config=Object(getNormalizedAcceleratorConfig.a)();return soundManager&&Object(stopAllSoundsAutomatically.a)(Object.assign({},soundManager.collection.groups),config.soundManager.excludeFromAutomaticStop),dispatch(lib.ActionCreators.undo())}},158:function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}__webpack_require__.d(__webpack_exports__,"a",(function(){return _objectSpread2}))},175:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(reducer){var rawConfig=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};debug.set(rawConfig.debug);var initialState,config=_objectSpread({limit:void 0,filter:function(){return!0},groupBy:function(){return null},undoType:_actions.ActionTypes.UNDO,redoType:_actions.ActionTypes.REDO,jumpToPastType:_actions.ActionTypes.JUMP_TO_PAST,jumpToFutureType:_actions.ActionTypes.JUMP_TO_FUTURE,jumpType:_actions.ActionTypes.JUMP,neverSkipReducer:!1,ignoreInitialState:!1,syncFilter:!1},rawConfig,{initTypes:(0,_helpers.parseActions)(rawConfig.initTypes,["@@redux-undo/INIT"]),clearHistoryType:(0,_helpers.parseActions)(rawConfig.clearHistoryType,[_actions.ActionTypes.CLEAR_HISTORY])}),skipReducer=config.neverSkipReducer?function(res,action){for(var _len=arguments.length,slices=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)slices[_key-2]=arguments[_key];return _objectSpread({},res,{present:reducer.apply(void 0,[res.present,action].concat(slices))})}:function(res){return res};return function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};debug.start(action,state);for(var res,history=state,_len2=arguments.length,slices=new Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++)slices[_key2-2]=arguments[_key2];if(!initialState){if(debug.log("history is uninitialized"),void 0===state){var createHistoryAction={type:"@@redux-undo/CREATE_HISTORY"},start=reducer.apply(void 0,[state,createHistoryAction].concat(slices));return history=createHistory(start,config.ignoreInitialState),debug.log("do not set initialState on probe actions"),debug.end(history),history}(0,_helpers.isHistory)(state)?(history=initialState=config.ignoreInitialState?state:(0,_helpers.newHistory)(state.past,state.present,state.future),debug.log("initialHistory initialized: initialState is a history",initialState)):(history=initialState=createHistory(state,config.ignoreInitialState),debug.log("initialHistory initialized: initialState is not a history",initialState))}switch(action.type){case void 0:return history;case config.undoType:return res=jump(history,-1),debug.log("perform undo"),debug.end(res),skipReducer.apply(void 0,[res,action].concat(slices));case config.redoType:return res=jump(history,1),debug.log("perform redo"),debug.end(res),skipReducer.apply(void 0,[res,action].concat(slices));case config.jumpToPastType:return res=jumpToPast(history,action.index),debug.log("perform jumpToPast to ".concat(action.index)),debug.end(res),skipReducer.apply(void 0,[res,action].concat(slices));case config.jumpToFutureType:return res=jumpToFuture(history,action.index),debug.log("perform jumpToFuture to ".concat(action.index)),debug.end(res),skipReducer.apply(void 0,[res,action].concat(slices));case config.jumpType:return res=jump(history,action.index),debug.log("perform jump to ".concat(action.index)),debug.end(res),skipReducer.apply(void 0,[res,action].concat(slices));case actionTypeAmongClearHistoryType(action.type,config.clearHistoryType):return res=createHistory(history.present,config.ignoreInitialState),debug.log("perform clearHistory"),debug.end(res),skipReducer.apply(void 0,[res,action].concat(slices));default:if(res=reducer.apply(void 0,[history.present,action].concat(slices)),config.initTypes.some((function(actionType){return actionType===action.type})))return debug.log("reset history due to init action"),debug.end(initialState),initialState;if(history._latestUnfiltered===res)return history;var filtered="function"==typeof config.filter&&!config.filter(action,res,history);if(filtered){var filteredState=(0,_helpers.newHistory)(history.past,res,history.future,history.group);return config.syncFilter||(filteredState._latestUnfiltered=history._latestUnfiltered),debug.log("filter ignored action, not storing it in past"),debug.end(filteredState),filteredState}var group=config.groupBy(action,res,history);if(null!=group&&group===history.group){var groupedState=(0,_helpers.newHistory)(history.past,res,history.future,history.group);return debug.log("groupBy grouped the action with the previous action"),debug.end(groupedState),groupedState}return history=insert(history,res,config.limit,group),debug.log("inserted new state into history"),debug.end(history),history}}};var debug=function(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(176)),_actions=__webpack_require__(116),_helpers=__webpack_require__(117);function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function createHistory(state,ignoreInitialState){var history=(0,_helpers.newHistory)([],state,[]);return ignoreInitialState&&(history._latestUnfiltered=null),history}function insert(history,state,limit,group){var lengthWithoutFuture=history.past.length+1;debug.log("inserting",state),debug.log("new free: ",limit-lengthWithoutFuture);var past=history.past,_latestUnfiltered=history._latestUnfiltered,isHistoryOverflow=limit&&limit<=lengthWithoutFuture,pastSliced=past.slice(isHistoryOverflow?1:0),newPast=null!=_latestUnfiltered?[].concat(_toConsumableArray(pastSliced),[_latestUnfiltered]):pastSliced;return(0,_helpers.newHistory)(newPast,state,[],group)}function jumpToFuture(history,index){if(index<0||index>=history.future.length)return history;var past=history.past,future=history.future,_latestUnfiltered=history._latestUnfiltered,newPast=[].concat(_toConsumableArray(past),[_latestUnfiltered],_toConsumableArray(future.slice(0,index))),newPresent=future[index],newFuture=future.slice(index+1);return(0,_helpers.newHistory)(newPast,newPresent,newFuture)}function jumpToPast(history,index){if(index<0||index>=history.past.length)return history;var past=history.past,future=history.future,_latestUnfiltered=history._latestUnfiltered,newPast=past.slice(0,index),newFuture=[].concat(_toConsumableArray(past.slice(index+1)),[_latestUnfiltered],_toConsumableArray(future)),newPresent=past[index];return(0,_helpers.newHistory)(newPast,newPresent,newFuture)}function jump(history,n){return n>0?jumpToFuture(history,n-1):n<0?jumpToPast(history,history.past.length+n):history}function actionTypeAmongClearHistoryType(actionType,clearHistoryType){return clearHistoryType.indexOf(actionType)>-1?actionType:!actionType}},176:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var __DEBUG__,displayBuffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.set=function(debug){__DEBUG__=debug},exports.start=function(action,state){void(displayBuffer={header:[],prev:[],action:[],next:[],msgs:[]}),__DEBUG__&&(console.group?(displayBuffer.header=["%credux-undo","font-style: italic","action",action.type],displayBuffer.action=colorFormat("action",colors_action,action),displayBuffer.prev=colorFormat("prev history",colors_prevState,state)):(displayBuffer.header=["redux-undo action",action.type],displayBuffer.action=["action",action],displayBuffer.prev=["prev history",state]))},exports.end=function(nextState){__DEBUG__&&(console.group?displayBuffer.next=colorFormat("next history",colors_nextState,nextState):displayBuffer.next=["next history",nextState],function(){var _displayBuffer=displayBuffer,header=_displayBuffer.header,prev=_displayBuffer.prev,next=_displayBuffer.next,action=_displayBuffer.action,msgs=_displayBuffer.msgs;if(console.group){var _console,_console2,_console3,_console4,_console5;(_console=console).groupCollapsed.apply(_console,_toConsumableArray(header)),(_console2=console).log.apply(_console2,_toConsumableArray(prev)),(_console3=console).log.apply(_console3,_toConsumableArray(action)),(_console4=console).log.apply(_console4,_toConsumableArray(next)),(_console5=console).log.apply(_console5,_toConsumableArray(msgs)),console.groupEnd()}else{var _console6,_console7,_console8,_console9,_console10;(_console6=console).log.apply(_console6,_toConsumableArray(header)),(_console7=console).log.apply(_console7,_toConsumableArray(prev)),(_console8=console).log.apply(_console8,_toConsumableArray(action)),(_console9=console).log.apply(_console9,_toConsumableArray(next)),(_console10=console).log.apply(_console10,_toConsumableArray(msgs))}}())},exports.log=function(){if(__DEBUG__){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];displayBuffer.msgs=displayBuffer.msgs.concat([].concat(args,["\n"]))}};var colors_prevState="#9E9E9E",colors_action="#03A9F4",colors_nextState="#4CAF50";function colorFormat(text,color,obj){return["%c".concat(text),"color: ".concat(color,"; font-weight: bold"),obj]}},357:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(44),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),clsx__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(13),__webpack_require__(47)),_utils_capitalize__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(51),_styles_withStyles__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(48),_utils_useIsFocusVisible__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(165),_utils_useForkRef__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(58),_Typography__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(402),Link=react__WEBPACK_IMPORTED_MODULE_2__.forwardRef((function(props,ref){var classes=props.classes,className=props.className,_props$color=props.color,color=void 0===_props$color?"primary":_props$color,_props$component=props.component,component=void 0===_props$component?"a":_props$component,onBlur=props.onBlur,onFocus=props.onFocus,TypographyClasses=props.TypographyClasses,_props$underline=props.underline,underline=void 0===_props$underline?"hover":_props$underline,_props$variant=props.variant,variant=void 0===_props$variant?"inherit":_props$variant,other=Object(_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__.a)(props,["classes","className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"]),_useIsFocusVisible=Object(_utils_useIsFocusVisible__WEBPACK_IMPORTED_MODULE_7__.a)(),isFocusVisible=_useIsFocusVisible.isFocusVisible,onBlurVisible=_useIsFocusVisible.onBlurVisible,focusVisibleRef=_useIsFocusVisible.ref,_React$useState=react__WEBPACK_IMPORTED_MODULE_2__.useState(!1),focusVisible=_React$useState[0],setFocusVisible=_React$useState[1],handlerRef=Object(_utils_useForkRef__WEBPACK_IMPORTED_MODULE_8__.a)(ref,focusVisibleRef);return react__WEBPACK_IMPORTED_MODULE_2__.createElement(_Typography__WEBPACK_IMPORTED_MODULE_9__.a,Object(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.a)({className:Object(clsx__WEBPACK_IMPORTED_MODULE_4__.a)(classes.root,classes["underline".concat(Object(_utils_capitalize__WEBPACK_IMPORTED_MODULE_5__.a)(underline))],className,focusVisible&&classes.focusVisible,"button"===component&&classes.button),classes:TypographyClasses,color:color,component:component,onBlur:function(event){focusVisible&&(onBlurVisible(),setFocusVisible(!1)),onBlur&&onBlur(event)},onFocus:function(event){isFocusVisible(event)&&setFocusVisible(!0),onFocus&&onFocus(event)},ref:handlerRef,variant:variant},other))}));__webpack_exports__.a=Object(_styles_withStyles__WEBPACK_IMPORTED_MODULE_6__.a)({root:{},underlineNone:{textDecoration:"none"},underlineHover:{textDecoration:"none","&:hover":{textDecoration:"underline"}},underlineAlways:{textDecoration:"underline"},button:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none","&::-moz-focus-inner":{borderStyle:"none"},"&$focusVisible":{outline:"auto"}},focusVisible:{}},{name:"MuiLink"})(Link)},369:function(module,exports,__webpack_require__){module.exports={"skip-to-content-link":"_2OKX2flLiBQMUVV0deMrF9"}},423:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"RenderingContainerUnconnected",(function(){return RenderingContainer_RenderingContainerUnconnected})),__webpack_require__.d(__webpack_exports__,"mapStateToProps",(function(){return RenderingContainer_mapStateToProps})),__webpack_require__.d(__webpack_exports__,"mapDispatchToProps",(function(){return RenderingContainer_mapDispatchToProps})),__webpack_require__.d(__webpack_exports__,"RenderingContainer",(function(){return RenderingContainer}));var AppContextConsumerWrapper=__webpack_require__(46),classnames=__webpack_require__(32),classnames_default=__webpack_require__.n(classnames),ActionTypes=__webpack_require__(45);var createStoryEndAction=__webpack_require__(100),createStoryStateAction=__webpack_require__(67),es=__webpack_require__(7),dist=__webpack_require__(42),react=__webpack_require__(0);const strings={PASSAGE_NOT_FOUND:"No passage could be found in the passages map with the name %NAME%."};class PassagePluginsWrapper_PassagePluginsWrapperUnconnected extends react.PureComponent{constructor(props){super(props),this.render=()=>{const _this$props=this.props,children=_this$props.children,config=_this$props.config,passagesMap=_this$props.passagesMap,plugins=_this$props.plugins,getState=_this$props.reduxStore.getState,soundManager=_this$props.soundManager,_reduxState$history$p=getState().history.present,lastLinkTags=_reduxState$history$p.lastLinkTags,passageName=_reduxState$history$p.passageName,passageTimeCounter=_reduxState$history$p.passageTimeCounter,storyState=_reduxState$history$p.storyState,passageObject=Object(dist.assertValid)(passagesMap[passageName],strings.PASSAGE_NOT_FOUND);if(this.lastPluginsBeforeRenderOutput&&this.lastPassageTime===passageTimeCounter)return this.lastPluginsBeforeRenderOutput;let finalChildren=children;return plugins.forEach(({beforeRender:beforeRender})=>{"function"==typeof beforeRender&&(finalChildren=beforeRender({config:config,lastLinkTags:lastLinkTags,passageObject:passageObject,soundManager:soundManager,storyState:storyState,children:finalChildren})||finalChildren)}),this.lastPluginsBeforeRenderOutput=finalChildren,finalChildren},this.componentDidMount=()=>{const _this$props2=this.props,config=_this$props2.config,passagesMap=_this$props2.passagesMap,plugins=_this$props2.plugins,store=_this$props2.reduxStore,getState=_this$props2.reduxStore.getState,soundManager=_this$props2.soundManager,_reduxState$history$p2=getState().history.present,lastLinkTags=_reduxState$history$p2.lastLinkTags,passageName=_reduxState$history$p2.passageName,passageObject=Object(dist.assertValid)(passagesMap[passageName],strings.PASSAGE_NOT_FOUND.replace(new RegExp(/%name%/gi),passageName)),setStoryState=this.setStoryState;plugins.forEach(({afterStoryInit:afterStoryInit})=>{"function"==typeof afterStoryInit&&afterStoryInit({config:config,lastLinkTags:lastLinkTags,passageObject:passageObject,setStoryState:setStoryState,soundManager:soundManager,store:store})})},this.componentDidUpdate=()=>{const _this$props3=this.props,config=_this$props3.config,passagesMap=_this$props3.passagesMap,plugins=_this$props3.plugins,getState=_this$props3.reduxStore.getState,soundManager=_this$props3.soundManager,_reduxState$history$p3=getState().history.present,lastLinkTags=_reduxState$history$p3.lastLinkTags,passageName=_reduxState$history$p3.passageName,passageTimeCounter=_reduxState$history$p3.passageTimeCounter,storyState=_reduxState$history$p3.storyState;if(passageTimeCounter===this.lastPassageTime)return;const passageObject=Object(dist.assertValid)(passagesMap[passageName],strings.PASSAGE_NOT_FOUND);plugins.forEach(({afterPassageChange:afterPassageChange})=>{"function"==typeof afterPassageChange&&afterPassageChange({config:config,lastLinkTags:lastLinkTags,passageObject:passageObject,soundManager:soundManager,storyState:storyState})}),this.lastPassageTime=passageTimeCounter},this.componentWillUnmount=()=>{const _this$props4=this.props,config=_this$props4.config,passagesMap=_this$props4.passagesMap,plugins=_this$props4.plugins,_this$props4$reduxSto=_this$props4.reduxStore,dispatch=_this$props4$reduxSto.dispatch,getState=_this$props4$reduxSto.getState,soundManager=_this$props4.soundManager,_reduxState$history$p4=getState().history.present,lastLinkTags=_reduxState$history$p4.lastLinkTags,passageName=_reduxState$history$p4.passageName,passageTimeCounter=_reduxState$history$p4.passageTimeCounter,storyState=_reduxState$history$p4.storyState,storyEnded=_reduxState$history$p4.storyEnded,passageObject=Object(dist.assertValid)(passagesMap[passageName],strings.PASSAGE_NOT_FOUND);plugins.forEach(({beforeStoryEnd:beforeStoryEnd})=>{"function"==typeof beforeStoryEnd&&beforeStoryEnd({config:config,lastLinkTags:lastLinkTags,passageObject:passageObject,soundManager:soundManager,storyState:storyState,passageTimeAtEnd:passageTimeCounter,wallTimeAtBeginning:this.genesisTime,wallTimeAtEnd:(new Date).getTime()}),storyEnded||dispatch(Object(createStoryEndAction.a)())})},this.setStoryState=updatedStateProps=>{const _this$props5=this.props,lastPassageName=_this$props5.lastPassageName;return(0,_this$props5.reduxStore.dispatch)(Object(createStoryStateAction.a)(updatedStateProps,lastPassageName))},this.genesisTime=(new Date).getTime()}}const PassagePluginsWrapper=Object(es.b)(({history:{past:past}})=>{var _a;return{lastPassageName:(null===(_a=past[past.length-1])||void 0===_a?void 0:_a.passageName)||""}})(PassagePluginsWrapper_PassagePluginsWrapperUnconnected);var Article=__webpack_require__(77);function bookmark(dispatch){return dispatch(Object.freeze({type:ActionTypes.a.Bookmark}))}var getStructuredTags=__webpack_require__(68),mutateCurrentStoryStateInstanceWithPluginExecution=__webpack_require__(90),state_navigate=__webpack_require__(89),state_reset=__webpack_require__(136),rewind=__webpack_require__(137),tslib_es6=__webpack_require__(36),BuiltInTags=__webpack_require__(59),getTag=__webpack_require__(57);const PassageContentContainer_strings_COMPONENT_NOT_FOUND="The contents property of the passage object passed to PassageContainer was not found.",PassageContentContainer_strings_CANT_RENDER_NORENDER_PASSAGE='A passage with the tag "noRender" was passed to PassageContainer. These passages cannot be rendered and should be used solely for exporting reusable content.',PassageContentContainer=Object(es.b)(null,dispatch=>({dispatch:dispatch}))(_a=>{var passage=_a.passage,_a$passage=_a.passage,content=_a$passage.content,tags=_a$passage.tags,passageProps=Object(tslib_es6.b)(_a,["passage","passage"]);const SafeContent=Object(dist.assertValid)(content,PassageContentContainer_strings_COMPONENT_NOT_FOUND);return Object(dist.assert)(Array.isArray(tags)&&!Object(getTag.a)(tags,BuiltInTags.a.NoRender),PassageContentContainer_strings_CANT_RENDER_NORENDER_PASSAGE),react.createElement(SafeContent,Object.assign({passage:passage},passageProps))}),PassageHeaders_strings_COMPONENT_CONSTRUCTOR_NOT_FOUND="There was no contents property found in the header with name %NAME%.",PassageHeadersConnected=Object(es.b)(null,dispatch=>({dispatch:dispatch}))(_a=>{var headers=_a.headers,passageProps=Object(tslib_es6.b)(_a,["headers"]);return react.createElement("div",{className:classnames_default()("passage-headers")},headers.map(({content:content},index)=>{const SafeContent=Object(dist.assertValid)(content,PassageHeaders_strings_COMPONENT_CONSTRUCTOR_NOT_FOUND);return react.createElement(SafeContent,Object.assign({key:index},passageProps))}))}),PassageFooters_strings_COMPONENT_CONSTRUCTOR_NOT_FOUND="There was no contents property found in the footer with name %NAME%.",PassageFootersConnected=Object(es.b)(null,dispatch=>({dispatch:dispatch}))(_a=>{var footers=_a.footers,passageProps=Object(tslib_es6.b)(_a,["footers"]);return react.createElement("div",{className:classnames_default()("passage-footers")},footers.map(({content:content},index)=>{const SafeContent=Object(dist.assertValid)(content,PassageFooters_strings_COMPONENT_CONSTRUCTOR_NOT_FOUND);return react.createElement(SafeContent,Object.assign({key:index},passageProps))}))});var components=__webpack_require__(33),components_default=__webpack_require__.n(components);const PassageContainer=react.forwardRef((_a,ref)=>{var config=_a.config,footers=_a.footers,headers=_a.headers,passage=_a.passage,name=_a.passage.name,passageProps=Object(tslib_es6.b)(_a,["config","footers","headers","passage","passage"]);return react.createElement("div",{className:classnames_default()(components_default.a["passage-container"],"passage-container",name)},react.createElement(PassageHeadersConnected,Object.assign({config:config,headers:headers,passage:passage},passageProps)),react.createElement("span",{className:classnames_default()("scroll"),ref:ref}),react.createElement(PassageContentContainer,Object.assign({config:config,passage:passage},passageProps)),react.createElement(PassageFootersConnected,Object.assign({config:config,footers:footers,passage:passage},passageProps)))});var UrlLink=__webpack_require__(79);const SkipToContentLinkDestination=_a=>{var children=_a.children,className=_a.className,id=_a.id,props=Object(tslib_es6.b)(_a,["children","className","id"]);return react.createElement(UrlLink.a,Object.assign({},props,{className:classnames_default()("skip-to-content-link-destination",className),id:id||"#skip-to-content".slice(1)}),children||"")},SinglePassageRenderer=({context:{config:config,getSoundManager:getSoundManager,footers:footers,headers:headers,passagesMap:passagesMap,store:{dispatch:dispatch,getState:getState}},passageFunctions:passageFunctions})=>{const _getState$history$pre=getState().history.present,lastLinkTags=_getState$history$pre.lastLinkTags,passageName=_getState$history$pre.passageName,storyEnded=_getState$history$pre.storyEnded,storyState=_getState$history$pre.storyState,soundManager=getSoundManager();return react.createElement(react.Fragment,null,react.createElement(SkipToContentLinkDestination,{id:passageName}),react.createElement(PassageContainer,Object.assign({config:config,dispatch:dispatch,storyEnded:storyEnded,footers:footers,headers:headers,lastLinkTags:lastLinkTags,passage:passagesMap[passageName],soundManager:soundManager,storyState:storyState},passageFunctions)))},PassageRendererWrapper_strings={PASSAGE_NOT_FOUND:"No passage named %NAME% could be found within the passages map."};class PassageRendererWrapper_PassageRendererWrapper extends react.PureComponent{constructor(){super(...arguments),this.render=()=>react.createElement(AppContextConsumerWrapper.a,null,context=>react.createElement(Article.a,{className:classnames_default()(components_default.a["passage-renderer-wrapper"],"passage-renderer-wrapper","single-passage-renderer")},react.createElement(SinglePassageRenderer,{context:context,passageFunctions:{bookmark:this.bookmark,endStory:this.endStory,navigateTo:this.navigateTo,rewind:this.rewind,restart:this.restart,setStoryState:this.setStoryState}}))),this.bookmark=()=>bookmark(this.props.dispatch),this.endStory=()=>this.props.dispatch(Object(createStoryEndAction.a)()),this.navigateTo=(passageName,tags)=>{const _this$props=this.props,dispatch=_this$props.dispatch,passage=_this$props.passagesMap[passageName];return Object(dist.assert)(passage,PassageRendererWrapper_strings.PASSAGE_NOT_FOUND.replace(/%name%/gi,passageName)),Object(state_navigate.a)({dispatch:dispatch,passage:passage,linkTags:tags||[]})},this.restart=()=>{const _this$props2=this.props,config=_this$props2.config,dispatch=_this$props2.dispatch,unstructured=_this$props2.lastLinkTags,passageObject=_this$props2.passageObject,plugins=_this$props2.plugins,storyState=_this$props2.storyState,lastLinkTags=Object(getStructuredTags.a)(unstructured);return Object(state_reset.a)({config:config,dispatch:dispatch,lastLinkTags:lastLinkTags,passageObject:passageObject,plugins:plugins,storyState:storyState,soundManager:this.props.soundManager})},this.rewind=()=>Object(rewind.a)(this.props.dispatch,this.props.soundManager),this.setStoryState=updatedStateProps=>Object(mutateCurrentStoryStateInstanceWithPluginExecution.a)({updatedStateProps:updatedStateProps,dispatch:this.props.dispatch,history:this.props.history,passageObject:this.props.passageObject,plugins:this.props.plugins,soundManager:this.props.soundManager})}}const PassageRendererWrapperConnected=Object(es.b)(({history:history,history:{present:{lastLinkTags:lastLinkTags,passageName:passageName,storyState:storyState}}},{passagesMap:passagesMap})=>({history:history,lastLinkTags:lastLinkTags,storyState:storyState,passageObject:passagesMap[passageName]}),dispatch=>({dispatch:dispatch}))(PassageRendererWrapper_PassageRendererWrapper);var SkipToContentLink=__webpack_require__(369),SkipToContentLink_default=__webpack_require__.n(SkipToContentLink);const SkipToContentLink_SkipToContentLink=_a=>{var children=_a.children,className=_a.className,href=_a.href,tabIndex=_a.tabIndex,otherProps=Object(tslib_es6.b)(_a,["children","className","href","tabIndex"]);return react.createElement(UrlLink.a,Object.assign({},otherProps,{className:classnames_default()(SkipToContentLink_default.a["skip-to-content-link"],"skip-to-content-link",className),href:href||"#skip-to-content",tabIndex:tabIndex||1}),children||children&&Array.isArray(children)&&children.length?children:"Skip to content")};class RenderingContainer_RenderingContainerUnconnected extends react.PureComponent{constructor(){super(...arguments),this.render=()=>react.createElement(react.Fragment,null,react.createElement(SkipToContentLink_SkipToContentLink,null),react.createElement(AppContextConsumerWrapper.a,null,({config:config,config:{debug:debug,debugOptions:{noTimings:noTimings}},getSoundManager:getSoundManager,passagesMap:passagesMap,plugins:plugins,store:store})=>this.props.storyRequiresFullRerender?null:react.createElement("div",{className:classnames_default()(components_default.a["rendering-container"],"rendering-container",{[components_default.a["no-timings"]]:debug&&noTimings,"no-timings":debug&&noTimings})},react.createElement(PassagePluginsWrapper,{config:config,passagesMap:passagesMap,plugins:plugins,reduxStore:store,soundManager:getSoundManager()},react.createElement(PassageRendererWrapperConnected,{config:config,passagesMap:passagesMap,plugins:plugins,soundManager:getSoundManager()}))))),this.componentDidUpdate=()=>{const _this$props=this.props,resetStoryRequiresFullRerender=_this$props.resetStoryRequiresFullRerender;_this$props.storyRequiresFullRerender&&resetStoryRequiresFullRerender()}}}const RenderingContainer_mapStateToProps=({storyRequiresFullRerender:storyRequiresFullRerender})=>({storyRequiresFullRerender:storyRequiresFullRerender}),RenderingContainer_mapDispatchToProps=dispatch=>({resetStoryRequiresFullRerender:()=>{return dispatch((value=!1,Object.freeze({type:ActionTypes.a.StoryRequiresFullRerender,value:value})));var value}}),RenderingContainer=Object(es.b)(RenderingContainer_mapStateToProps,RenderingContainer_mapDispatchToProps)(RenderingContainer_RenderingContainerUnconnected)},57:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getTag}));var C_Users_furkl_code_accelerator_accelerate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(55);const getTag=(tags,toSearch)=>{if(!Array.isArray(tags))return null;var _step,a,b,_iterator=Object(C_Users_furkl_code_accelerator_accelerate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(tags.filter(Boolean));try{for(_iterator.s();!(_step=_iterator.n()).done;){const tag=_step.value;if("string"==typeof tag){if(tag===toSearch||tag===toSearch.key)return"string"==typeof toSearch?{key:toSearch,value:!0}:toSearch}else if("string"==typeof toSearch){if(tag.key===toSearch)return{key:toSearch,value:!0}}else if(b=toSearch,(a=tag)&&b&&a.key&&b.key&&a.key===b.key&&a.value&&b.value&&a.value===b.value)return toSearch}}catch(err){_iterator.e(err)}finally{_iterator.f()}return null}},59:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return BuiltInTags}));const BuiltInTags={Start:{key:"start",value:!0},NoRender:{key:"noRender",value:!0}}},68:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getStructuredTags}));const getStructuredTags=tags=>Object.freeze(tags.map(key=>"string"==typeof key?{key:key,value:!0}:key))},70:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return stopAllSoundsAutomatically}));const _configurationDefault=__webpack_require__(61).a.soundManager.defaults.fade,defaultEasingCurve=_configurationDefault.easingCurve,defaultLength=_configurationDefault.length,stopAllSoundsAutomatically=(groups,ignores)=>{Object.keys(groups).forEach(groupName=>{if(ignores.groups.includes(groupName))return;const group=groups[groupName];Object.keys(group.sounds).forEach(soundName=>{var _a,_b,_c,_d;if(ignores.sounds.includes(soundName))return;const sound=group.sounds[soundName];sound.__fadeOverride={easingCurve:{in:(null===(_b=null===(_a=sound.__fadeOverride)||void 0===_a?void 0:_a.easingCurve)||void 0===_b?void 0:_b.in)||defaultEasingCurve.in,out:defaultEasingCurve.out},length:{in:(null===(_d=null===(_c=sound.__fadeOverride)||void 0===_c?void 0:_c.length)||void 0===_d?void 0:_d.in)||defaultLength.in,out:defaultLength.out}},setTimeout(()=>{sound.stop()},556),setTimeout(()=>{delete sound.__fadeOverride},defaultLength.out+6)})})}},74:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createPassageNavigationAction}));var _ActionTypes__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45),_tags_getStructuredTags__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(68);const createPassageNavigationAction=(passage,linkTags=Object.freeze([]))=>Object.freeze({type:_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.a.PassageNavigation,value:{linkTags:Object(_tags_getStructuredTags__WEBPACK_IMPORTED_MODULE_1__.a)(linkTags),passage:passage}})},79:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return UrlLink}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(36),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(32),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_material_ui_core_Link__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(357),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),_index_less__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(109),_index_less__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_index_less__WEBPACK_IMPORTED_MODULE_4__);const UrlLink=_a=>{var children=_a.children,className=_a.className,props=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(_a,["children","className"]);return react__WEBPACK_IMPORTED_MODULE_3__.createElement(_material_ui_core_Link__WEBPACK_IMPORTED_MODULE_2__.a,Object.assign({},props,{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(_index_less__WEBPACK_IMPORTED_MODULE_4___default.a["url-link"],"url-link",className)}),children)}},81:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ActionTypes",{enumerable:!0,get:function(){return _actions.ActionTypes}}),Object.defineProperty(exports,"ActionCreators",{enumerable:!0,get:function(){return _actions.ActionCreators}}),Object.defineProperty(exports,"parseActions",{enumerable:!0,get:function(){return _helpers.parseActions}}),Object.defineProperty(exports,"isHistory",{enumerable:!0,get:function(){return _helpers.isHistory}}),Object.defineProperty(exports,"includeAction",{enumerable:!0,get:function(){return _helpers.includeAction}}),Object.defineProperty(exports,"excludeAction",{enumerable:!0,get:function(){return _helpers.excludeAction}}),Object.defineProperty(exports,"combineFilters",{enumerable:!0,get:function(){return _helpers.combineFilters}}),Object.defineProperty(exports,"groupByActionTypes",{enumerable:!0,get:function(){return _helpers.groupByActionTypes}}),Object.defineProperty(exports,"newHistory",{enumerable:!0,get:function(){return _helpers.newHistory}}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return _reducer.default}});var obj,_actions=__webpack_require__(116),_helpers=__webpack_require__(117),_reducer=(obj=__webpack_require__(175))&&obj.__esModule?obj:{default:obj}},89:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return navigate}));var _tags_BuiltInTags__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(59),_actions_creators_createPassageNavigationAction__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(74),_tags_getStructuredTags__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(68),_tags_getTag__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(57),ts_assertions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(42);const strings_NO_NAVIGATING_TO_NO_RENDER_PASSAGES="You cannot link to a passage tagged noRender.",strings_PASSAGE_INVALID="No passage could be produced from the passageName argument passed to navigate.",navigate=({dispatch:dispatch,passage:passage,linkTags:linkTags=[]})=>(Object(ts_assertions__WEBPACK_IMPORTED_MODULE_4__.assert)(passage,strings_PASSAGE_INVALID),Object(ts_assertions__WEBPACK_IMPORTED_MODULE_4__.assert)(!Object(_tags_getTag__WEBPACK_IMPORTED_MODULE_3__.a)(passage.tags,_tags_BuiltInTags__WEBPACK_IMPORTED_MODULE_0__.a.NoRender),strings_NO_NAVIGATING_TO_NO_RENDER_PASSAGES),dispatch(Object(_actions_creators_createPassageNavigationAction__WEBPACK_IMPORTED_MODULE_1__.a)(passage,Object(_tags_getStructuredTags__WEBPACK_IMPORTED_MODULE_2__.a)(linkTags))))},90:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return mutateCurrentStoryStateInstanceWithPluginExecution}));var _actions_creators_createStoryStateAction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67),_configuration_getNormalizedAcceleratorConfig__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(35);const mutateCurrentStoryStateInstanceWithPluginExecution=({dispatch:dispatch,history:{past:past,present:{lastLinkTags:lastLinkTags,storyState:preupdateStoryState}},passageObject:passageObject,plugins:plugins,soundManager:soundManager,updatedStateProps:updatedStateProps})=>{var _a;const config=Object(_configuration_getNormalizedAcceleratorConfig__WEBPACK_IMPORTED_MODULE_1__.a)();dispatch(Object(_actions_creators_createStoryStateAction__WEBPACK_IMPORTED_MODULE_0__.a)(updatedStateProps,(null===(_a=past[past.length-1])||void 0===_a?void 0:_a.passageName)||""));const storyState=Object.assign(Object.assign({},preupdateStoryState),updatedStateProps);plugins.forEach(({afterStoryStateChange:afterStoryStateChange})=>{"function"==typeof afterStoryStateChange&&afterStoryStateChange({config:config,lastLinkTags:lastLinkTags,passageObject:passageObject,storyState:storyState,updatedStateProps:updatedStateProps,soundManager:soundManager})})}}}]);